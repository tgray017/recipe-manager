<h3>Edit your recipe!</h3>
<form action="/recipes/<%=@recipe.id%>" method="post">
  <input id="hidden" type="hidden" name="_method" value="patch">
  <p><label for="recipe[name]">Recipe name: </label><input type="text" name="recipe[name]" value="<%=@recipe.name%>"></p>
  <h4>Edit your ingredients</h4>
  <table id="ingredient_table">
    <th>Ingredient</th>
    <th>Quantity</th>
    <th>Unit</th>
    <%@recipe.ingredients.each do |i|%>
      <tr>
        <td><input type="text" name="recipe[ingredients][][name]" value="<%=i.name%>"></td>
        <td><input type="text" name="recipe[ingredients][][quantity]" value="<%=i.quantity%>"></td>
        <td><input type="text" name="recipe[ingredients][][unit]" value="<%=i.unit%>"></td>
      </tr>
    <%end%>
  </table>
  <button type="button" onclick="addIngredient()">Add ingredient</button>

  
  <p><label for="recipe[directions]">Directions: </label><textarea name="recipe[directions]" rows="10" cols="30"><%=@recipe.directions%></textarea></p>
  <p><label for="recipe[total_prep_time]">Total Prep Time: </label><input type="text" name="recipe[total_prep_time]" value="<%=@recipe.total_prep_time%>"></p>
  <input type="submit" value="Update Recipe">
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>
function addIngredient() {
  $("#ingredient_table").append(
      "<tr>" +
        "<td><input type=\"text\" name=\"recipe[ingredients][][name]\"></td>" +
        "<td><input type=\"text\" name=\"recipe[ingredients][][quantity]\"></td>" +
        "<td><input type=\"text\" name=\"recipe[ingredients][][unit]\"></td>" +
      "</tr>"
  );
}
</script>